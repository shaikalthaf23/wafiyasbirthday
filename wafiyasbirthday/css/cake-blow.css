/* Adapted from sherryuser/cake-blow style.css, namespaced under .cake-blow */
.candle-count-display {
  text-align: center;
  margin-top: 10px;
  margin-bottom: 8px;
  font-family: 'Arial', sans-serif;
  font-size: 14px;
  color: #6A4B18;
  background-color: #F0E4D0;
  padding: 6px 10px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  border: 2px solid #553C13;
  z-index: 100;
}
.candle-count-display span { font-weight: bold; color: #AD030F; }

.cake-blow-container {
  position: fixed;
  bottom: 18%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 101;
  text-align: center;
  width: 100%;
  pointer-events: auto;
}

.cake-blow { 
  position: relative; 
  width: 280px; 
  height: 220px; 
  margin: 0 auto;
  box-sizing: border-box;
}
.cake-blow > * { position: absolute; }

.plate { 
  position: absolute; 
  bottom: -15px; 
  left: 50%; 
  transform: translateX(-50%);
  background-color: #d3d3d3; 
  width: 300px; 
  height: 120px; 
  border-radius: 50%; 
  box-shadow: 0 2px 0 #b3b3b3, 0 4px 0 #9a9a9a, 0 6px 0 #808080, 0 8px 20px rgba(0,0,0,0.4);
}

.layer { 
  display: block; 
  width: 260px; 
  height: 110px; 
  border-radius: 50%; 
  background-color: #6b4c2b;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.1);
}
.layer-top { top: 0px; }
.layer-middle { top: 35px; }
.layer-bottom { top: 70px; }

.icing { 
  top: 3px; 
  left: 50%;
  transform: translateX(-50%);
  background-color: #f5e6d3; 
  width: 250px; 
  height: 100px; 
  border-radius: 50%;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}
.icing:before { 
  content: ""; 
  position: absolute; 
  top: 5px; 
  right: 6px; 
  bottom: 8px; 
  left: 6px; 
  background-color: #f9f0e6; 
  box-shadow: 0 0 6px #f6efe3, inset 0 1px 2px rgba(0,0,0,0.05);
  border-radius: 50%; 
  z-index: 1;
}

.drip { 
  display: block; 
  width: 55px; 
  height: 65px; 
  border-bottom-left-radius: 27px; 
  border-bottom-right-radius: 27px; 
  background-color: #f5e6d3;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.08);
}
.drip1 { 
  top: 60px; 
  left: 15px; 
  transform: skewY(12deg); 
  height: 52px; 
  width: 45px;
}
.drip2 { 
  top: 75px; 
  right: 15px; 
  left: auto;
  transform: scaleX(-1) skewY(12deg);
}
.drip3 { 
  top: 62px; 
  left: 50%;
  transform: translateX(-50%);
  width: 90px; 
  height: 58px;
  border-bottom-left-radius: 45px; 
  border-bottom-right-radius: 45px;
}

/* Cherry toppings */
.cherry {
  position: absolute;
  width: 12px;
  height: 13px;
  background-color: #c41433;
  border-radius: 50%;
  top: 15px;
  z-index: 5;
  box-shadow: inset -1px -1px 2px rgba(0,0,0,0.3), 0 0 4px rgba(196, 20, 51, 0.6);
}
.cherry::before {
  content: '';
  position: absolute;
  width: 2px;
  height: 8px;
  background-color: #5d4e37;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 1px;
}
.cherry1 { left: 20px; }
.cherry2 { left: 50%; transform: translateX(-50%); }
.cherry3 { right: 20px; }
.cherry4 { left: 35px; top: 25px; }
.cherry5 { left: 65%; top: 22px; }
.cherry6 { right: 35px; top: 28px; }
.cherry7 { left: 48%; top: 30px; transform: translateX(-50%); }
.cherry8 { left: 12px; top: 22px; }
.cherry9 { right: 12px; top: 25px; }
.cherry10 { left: 40%; top: 35px; }
.cherry11 { right: 40%; top: 32px; }
.cherry12 { left: 20%; top: 20px; }
.cherry13 { right: 20%; top: 28px; }
.cherry14 { left: 55%; top: 25px; }
.cherry15 { left: 8px; top: 35px; }
.cherry16 { right: 8px; top: 30px; }
.cherry17 { left: 32%; top: 18px; }
.cherry18 { right: 32%; top: 22px; }
.cherry19 { left: 60%; top: 35px; }
.cherry20 { left: 25%; top: 32px; }
.cherry21 { right: 25%; top: 35px; }
.cherry22 { left: 18%; top: 28px; }
.cherry23 { right: 18%; top: 32px; }
.cherry24 { left: 42%; top: 20px; }
.cherry25 { right: 42%; top: 28px; }

/* Sprinkles */
.sprinkle {
  position: absolute;
  width: 2px;
  height: 8px;
  border-radius: 1px;
  top: 20px;
  z-index: 4;
}
.sprinkle1 { left: 35px; background-color: #ff6b35; }
.sprinkle2 { left: 50%; background-color: #ffd700; }
.sprinkle3 { right: 35px; background-color: #ff6b35; }

.candle { 
  background-color: #ff0000; 
  width: 13px; 
  height: 38px; 
  border-radius: 6.5px/4px;
  top: -25px; 
  left: 50%; 
  margin-left: -6.5px; 
  z-index: 10; 
  position: absolute;
  box-shadow: inset 0 1px 1px rgba(255,255,255,0.2), 0 0 8px rgba(255,0,0,0.5);
}
.candle:before { 
  content: ""; 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 13px; 
  height: 7px; 
  border-radius: 50%; 
  background-color: #ff3333;
}
.candle.out .flame {
  /* Fade and shrink the flame smoothly instead of removing immediately */
  opacity: 0;
  transform: scale(0.6, 0.2) translateY(8px);
  animation: none !important;
  box-shadow: none;
  transition: opacity 1.2s ease, transform 1.2s ease, box-shadow 1.2s ease;
}

.flame { 
  position: absolute; 
  background-color: #ff8c00;
  width: 11px; 
  height: 28px; 
  border-radius: 9px 9px 7px 7px/22px 22px 6px 6px;
  top: -38px; 
  left: 50%; 
  margin-left: -5.5px; 
  z-index: 10;
  box-shadow: 0 0 12px rgba(255, 140, 0, 0.7), 0 0 20px rgba(255, 100, 0, 0.4);
  transform-origin: 50% 92%;
  animation: flicker 0.8s ease-in-out alternate infinite;
  transition: opacity 1.2s ease, transform 1.2s ease, box-shadow 1.2s ease;
}

@keyframes flicker { 
  0% { transform: skewX(4deg); box-shadow: 0 0 12px rgba(255, 140, 0, 0.7), 0 0 20px rgba(255, 100, 0, 0.4); }
  25% { transform: skewX(-6deg); }
  50% { transform: skewX(8deg); box-shadow: 0 0 14px rgba(255, 140, 0, 0.8), 0 0 24px rgba(255, 100, 0, 0.5); }
  75% { transform: skewX(-8deg); }
  100% { transform: skewX(4deg); }
}

/* Instruction text below cake */
.cake-instruction {
  text-align: center;
  margin-top: 80px;
  font-size: 30px;
  font-weight: bold;
  color: #fff;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.7), 0 0 16px #ffff00, 0 0 24px #ff00ff;
  z-index: 100;
  position: relative;
}

/* Message overlays */
.message-overlay {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 999;
  pointer-events: none;
}

.blown-message {
  font-size: 32px;
  color: #fff;
  text-shadow: 0 0 12px rgba(255, 255, 255, 0.8), 0 0 20px #ffff00;
  opacity: 0;
  animation: messageAppear 0.6s ease-in forwards;
}

.birthday-message {
  font-size: 36px;
  color: #fff;
  text-shadow: 0 0 15px rgba(255, 69, 0, 0.8), 0 0 30px #ff6347;
  opacity: 0;
  animation: birthdayBounce 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  margin-top: 20px;
}

@keyframes messageAppear {
  0% { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes birthdayBounce {
  0% { opacity: 0; transform: scale(0.6); }
  70% { opacity: 1; transform: scale(1.1); }
  100% { opacity: 1; transform: scale(1); }
}

/* Background fireworks burst particles */
.firework-bg {
  position: fixed;
  width: 3px;
  height: 3px;
  background: radial-gradient(circle, #ff6347, #ff4500);
  border-radius: 50%;
  z-index: 2;
  pointer-events: none;
  animation: burstPulse 1.5s ease-out infinite;
  box-shadow: 0 0 8px #ff6347, 0 0 15px rgba(255, 99, 71, 0.6);
}

@keyframes burstPulse {
  0% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; }
  100% { opacity: 0; transform: scale(0.3); }
}

/* Mobile / Responsive tweaks */
@media (max-width: 768px) {
  .cake-blow-container {
    position: absolute; /* avoid covering fixed UI on very small screens */
    bottom: 8%;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    padding: 0 12px;
  }

  .cake-blow { 
    width: 220px; 
    height: 170px; 
  }

  .plate { width: 260px; height: 90px; }
  .layer, .icing { width: 220px; }

  .cherry { width: 10px; height: 11px; }
  .cherry::before { height: 7px; }
  .sprinkle { height: 6px; }

  .candle { width: 11px; height: 34px; }
  .candle:before { width: 11px; height: 6px; }
  .flame { width: 9px; height: 24px; top: -32px; }

  .cake-instruction { margin-top: 60px; font-size: 22px; }
}

@media (max-width: 420px) {
  .cake-blow { width: 180px; height: 140px; }
  .plate { width: 210px; height: 78px; }
  .layer, .icing { width: 180px; }
  .cherry { width: 9px; height: 10px; }
  .candle { width: 10px; height: 30px; }
  .flame { width: 8px; height: 20px; top: -28px; }
  .cake-instruction { margin-top: 48px; font-size: 18px; }
  .candle-count-display { font-size: 14px; padding: 4px 8px; }
}
